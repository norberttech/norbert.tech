<!doctype html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Mroczne strony modularyzacji</title>
    <meta property="og:title" content="Mroczne strony modularyzacji" />
    <meta name="twitter:title" content="Mroczne strony modularyzacji" >

    <meta name="description" content="Praktyczne wyzwania modularyzacji systemÃ³w - jak rozwiÄ…zaÄ‡ problem sprzÄ™Å¼enia na poziomie bazy danych, kiedy trzeba wydzieliÄ‡ moduÅ‚ z monolitu. PorÃ³wnanie podejÅ›Ä‡: separacja odpowiedzialnoÅ›ci, projekcje, zdarzenia anemiczne a takÅ¼e materialized views.">
    <meta property="og:description" content="Praktyczne wyzwania modularyzacji systemÃ³w - jak rozwiÄ…zaÄ‡ problem sprzÄ™Å¼enia na poziomie bazy danych, kiedy trzeba wydzieliÄ‡ moduÅ‚ z monolitu. PorÃ³wnanie podejÅ›Ä‡: separacja odpowiedzialnoÅ›ci, projekcje, zdarzenia anemiczne a takÅ¼e materialized views.">
    <meta name="twitter:description" content="Praktyczne wyzwania modularyzacji systemÃ³w - jak rozwiÄ…zaÄ‡ problem sprzÄ™Å¼enia na poziomie bazy danych, kiedy trzeba wydzieliÄ‡ moduÅ‚ z monolitu. PorÃ³wnanie podejÅ›Ä‡: separacja odpowiedzialnoÅ›ci, projekcje, zdarzenia anemiczne a takÅ¼e materialized views.">

    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://norbert.tech/blog/2025-10-18/pl/mroczne-strony-modularyzacji" />
                <meta property="og:image" content="https://norbert.tech/assets/images/blog/dark-sides-of-modularization/roots-d63d84b2112026c791f0e48ba6e6d937.jpg" />
                    
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://norbert.tech/blog/2025-10-18/pl/mroczne-strony-modularyzacji" />
            <meta name="twitter:image" content="https://norbert.tech/assets/images/blog/dark-sides-of-modularization/roots-d63d84b2112026c791f0e48ba6e6d937.jpg">
        <meta name="twitter:site" content="@norbert_tech" />
    <meta name="twitter:creator" content="@norbert_tech" />

    <link rel="apple-touch-icon" sizes="180x180" href="https://norbert.tech/assets/images/favicons/apple-touch-icon-9cae7ee880b4fe0bd755d300e1bca71e.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://norbert.tech/assets/images/favicons/favicon-32x32-b7a4ad4b584ab95534144e071f0e8587.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://norbert.tech/assets/images/favicons/favicon-16x16-154ca21abc06ae116c8d7ffc5713c000.png">
    <link rel="shortcut icon" href="https://norbert.tech/assets/images/favicons/favicon-db409885df78dea389e6d0b036da382c.ico">

            <style>
            @import url('https://fonts.googleapis.com/css2?family=Cabin:ital,wght@0,400..700;1,400..700&display=swap');
        </style>
        <link rel="stylesheet" href="https://norbert.tech/assets/styles/app-ff31265a811feebd3b3b45d8dc315d8b.css">
    
            
<script type="importmap">
{
    "imports": {
        "app": "https://norbert.tech/assets/app-930adf3462cf9ab60908eb1b74cf7ca7.js",
        "@oddbird/popover-polyfill": "https://norbert.tech/assets/vendor/@oddbird/popover-polyfill/popover-polyfill.index-7979d53637476aa204f709644aed2c19.js",
        "https://norbert.tech/assets/bootstrap.js": "https://norbert.tech/assets/bootstrap-d78d7e12c819dedf89372fb4824c072d.js",
        "htmx.org": "https://norbert.tech/assets/vendor/htmx.org/htmx.org.index-023ae86a082913526422a6063298f898.js",
        "iconify-icon": "https://norbert.tech/assets/vendor/iconify-icon/iconify-icon.index-8a41e423576dc2d752509fd455f508c1.js",
        "@symfony/stimulus-bundle": "https://norbert.tech/assets/@symfony/stimulus-bundle/loader-5751ad1ee2975e725a94d8121d153d17.js",
        "@hotwired/stimulus": "https://norbert.tech/assets/vendor/@hotwired/stimulus/stimulus.index-304681764684182e6662e0931532ed91.js",
        "https://norbert.tech/assets/@symfony/stimulus-bundle/controllers.js": "https://norbert.tech/assets/@symfony/stimulus-bundle/controllers-11c35dc7f11bbd855b8108888f18f9b7.js",
        "https://norbert.tech/assets/controllers/hello_controller.js": "https://norbert.tech/assets/controllers/hello_controller-55882fcad241d2bea50276ea485583bc.js",
        "https://norbert.tech/assets/controllers/syntax_highlight_controller.js": "https://norbert.tech/assets/controllers/syntax_highlight_controller-ae10e4cee8b4dedbf232536d05654062.js",
        "https://norbert.tech/assets/controllers/clipboard_controller.js": "https://norbert.tech/assets/controllers/clipboard_controller-6aefa8a9dec3271dae2f05b464bf9204.js",
        "highlight.js/lib/core": "https://norbert.tech/assets/vendor/highlight.js/lib/core-760145ef158caabe84ca07686407d093.js",
        "highlight.js/lib/languages/php": "https://norbert.tech/assets/vendor/highlight.js/lib/languages/php-c0eb2105c14097e8a5a1e9a767e8ac95.js",
        "highlight.js/styles/github-dark.min.css": "data:application/javascript,document.head.appendChild%28Object.assign%28document.createElement%28%22link%22%29%2C%7Brel%3A%22stylesheet%22%2Chref%3A%22https%3A%2F%2Fnorbert.tech%2Fassets%2Fvendor%2Fhighlight.js%2Fstyles%2Fgithub-dark.min-4b46e20f66f76e35d6454ca4f09b57c3.css%22%7D%29%29",
        "@fontsource-variable/cabin/index.min.css": "data:application/javascript,document.head.appendChild%28Object.assign%28document.createElement%28%22link%22%29%2C%7Brel%3A%22stylesheet%22%2Chref%3A%22https%3A%2F%2Fnorbert.tech%2Fassets%2Fvendor%2F%40fontsource-variable%2Fcabin%2Findex.min-08e34691d22388e6974e6cb2bfbcbfd0.css%22%7D%29%29",
        "clipboard": "https://norbert.tech/assets/vendor/clipboard/clipboard.index-925566f98181665b5a61fea1bcd9033d.js",
        "highlight.js/lib/languages/shell": "https://norbert.tech/assets/vendor/highlight.js/lib/languages/shell-664215791af27581e04813723523a355.js",
        "highlight.js/lib/languages/json": "https://norbert.tech/assets/vendor/highlight.js/lib/languages/json-9ac51ad2a97f9ce56b2f309eb64d7b04.js",
        "highlight.js/lib/languages/twig": "https://norbert.tech/assets/vendor/highlight.js/lib/languages/twig-0f3c6d18c0368650898b432b7bcf672a.js",
        "highlight.js/lib/languages/sql": "https://norbert.tech/assets/vendor/highlight.js/lib/languages/sql-09f80640dd6fe9bed6ff4eb255b13f08.js",
        "highlight.js/lib/languages/javascript": "https://norbert.tech/assets/vendor/highlight.js/lib/languages/javascript-100f963be02a503f0531e497103ff398.js",
        "highlight.js/lib/languages/xml": "https://norbert.tech/assets/vendor/highlight.js/lib/languages/xml-a2295112e12d4d01f257d59e1cfa676d.js"
    }
}
</script>
<!-- ES Module Shims: Import maps polyfill for modules browsers without import maps support -->
<script async src="https://ga.jspm.io/npm:es-module-shims@1.10.0/dist/es-module-shims.js"></script>
<link rel="modulepreload" href="https://norbert.tech/assets/app-930adf3462cf9ab60908eb1b74cf7ca7.js">
<link rel="modulepreload" href="https://norbert.tech/assets/vendor/@oddbird/popover-polyfill/popover-polyfill.index-7979d53637476aa204f709644aed2c19.js">
<link rel="modulepreload" href="https://norbert.tech/assets/bootstrap-d78d7e12c819dedf89372fb4824c072d.js">
<link rel="modulepreload" href="https://norbert.tech/assets/vendor/htmx.org/htmx.org.index-023ae86a082913526422a6063298f898.js">
<link rel="modulepreload" href="https://norbert.tech/assets/vendor/iconify-icon/iconify-icon.index-8a41e423576dc2d752509fd455f508c1.js">
<link rel="modulepreload" href="https://norbert.tech/assets/@symfony/stimulus-bundle/loader-5751ad1ee2975e725a94d8121d153d17.js">
<link rel="modulepreload" href="https://norbert.tech/assets/vendor/@hotwired/stimulus/stimulus.index-304681764684182e6662e0931532ed91.js">
<link rel="modulepreload" href="https://norbert.tech/assets/@symfony/stimulus-bundle/controllers-11c35dc7f11bbd855b8108888f18f9b7.js">
<link rel="modulepreload" href="https://norbert.tech/assets/controllers/hello_controller-55882fcad241d2bea50276ea485583bc.js">
<script type="module">import 'app';</script>
                <script defer src="https://cloud.umami.is/script.js" data-website-id="9fed007d-d990-428b-b5d9-11c6ff55a3f1"></script>
    </head>
<body class="scroll-smooth text-black relative min-h-screen pb-16">
    <div class="sticky top-0 max-h-screen overflow-y-auto bg-white py-2 px-2 border-b border-gray-500 z-[9999] print:hidden">
        <div class="grid grid-cols-2 sm:mx-auto sm:max-w-screen-2xl md:px-4">
            <div class="text-left">
                <a href="/" class="text-lg">
                    norbert.tech
                </a>
            </div>
            <div class="text-right">
                <a href="/consulting" class="text-lg inline-flex items-center space-x-1 md:mr-4 mr-2">
                    <iconify-icon icon="lineicons:consulting" class="mr-1"></iconify-icon> Consulting
                </a>
                <a href="/blog" class="text-lg inline-flex items-center space-x-1">
                    <iconify-icon icon="ooui:articles-ltr" class="mr-1"></iconify-icon> Blog
                </a>
            </div>
        </div>
    </div>
    
    <main class="mx-auto max-w-screen-2xl mb-4 md:pt-4 px-4 lg:px-0">
            <div class="px-2 py-5 sm:px-4 md:px-8 lg:px-12 mx-auto max-w-4xl">
        <ul class="mt-2 pl-[20px] flex flex-wrap gap-2 sm:gap-4">
            <li>
                <a href="/blog" class="text-sm sm:text-base text-blue-500 hover:underline px-2 py-1 rounded">Go Back</a>
            </li>
                                                                <li>
                        <a href="/blog/2025-10-18/dark-sides-of-modularization"
                           class="text-sm sm:text-lg px-2 py-1 rounded hover:opacity-80"
                           title="English">ğŸ‡ºğŸ‡¸ English</a>
                    </li>
                                                                                <li>
                        <a href="/blog/2025-10-18/de/die-dunklen-seiten-der-modularisierung"
                           class="text-sm sm:text-lg px-2 py-1 rounded hover:opacity-80"
                           title="Deutsch">ğŸ‡©ğŸ‡ª Deutsch</a>
                    </li>
                                                                                <li>
                        <a href="/blog/2025-10-18/es/los-lados-oscuros-de-la-modularizacion"
                           class="text-sm sm:text-lg px-2 py-1 rounded hover:opacity-80"
                           title="Spanish">ğŸ‡ªğŸ‡¸ Spanish</a>
                    </li>
                                                                                <li>
                        <a href="/blog/2025-10-18/fr/les-cotes-sombres-de-la-modularisation"
                           class="text-sm sm:text-lg px-2 py-1 rounded hover:opacity-80"
                           title="French">ğŸ‡«ğŸ‡· French</a>
                    </li>
                                                                                <li>
                        <a href="/blog/2025-10-18/it/i-lati-oscuri-della-modularizzazione"
                           class="text-sm sm:text-lg px-2 py-1 rounded hover:opacity-80"
                           title="Italian">ğŸ‡®ğŸ‡¹ Italian</a>
                    </li>
                                    </ul>

            </div>
    <article class="blog-post">
            <div class="img-wide">
        <img src="https://norbert.tech/assets/images/blog/dark-sides-of-modularization/roots-d63d84b2112026c791f0e48ba6e6d937.jpg" alt="Mroczne strony modularyzacji" />
    </div>

    <h1 class="font-bold text-4xl mb-2" id="title">Mroczne strony modularyzacji</h1>
    <div class="mb-2">
        <small class="text-sm">Data Publikacji October 18, 2025 00:00</small>
    </div>
    <div class="mb-4">
                    <small><span class="badge badge-info">modularyzacja</span></small>
                    <small><span class="badge badge-info">architektura</span></small>
                    <small><span class="badge badge-info">rozwÃ³j oprogramowania</span></small>
            </div>

    <a href="#introduction"><h2 id="introduction">Wprowadzenie</h2></a>
    <p>
        TrafiÅ‚em niedawno na bardzo ciekawy problem, ktÃ³ry skÅ‚oniÅ‚ mnie do refleksji na temat mniej kuszÄ…cych aspektÃ³w
        modularyzacji, o ktÃ³rych przewaÅ¼nie nie sÅ‚yszymy na konferencjach czy warsztatach.
    </p>
    <p>
        Zacznijmy moÅ¼e od poczÄ…tku, czym w ogÃ³le jest modularyzacja? NajproÅ›ciej mÃ³wiÄ…c, jest to podziaÅ‚
        systemu na samodzielne czÄ™Å›ci (moduÅ‚y), z ktÃ³rych kaÅ¼dy posiada:
    </p>
    <ul>
        <li>Jasno okreÅ›lonÄ… odpowiedzialnoÅ›Ä‡</li>
        <li>Komunikuje siÄ™ poprzez zdefiniowane protokoÅ‚y komunikacji</li>
        <li>MoÅ¼e byÄ‡ rozwijany niezaleÅ¼nie od pozostaÅ‚ych moduÅ‚Ã³w</li>
    </ul>
    <p>
        W duÅ¼ym skrÃ³cie jest to ukÅ‚on w kierunku zasady <strong>dziel i zwyciÄ™Å¼aj</strong>. Zamiast zmagaÄ‡ siÄ™
        z wielkim, skomplikowanym i zagmatwanym problemem, dzielimy go na mniejsze problemy, co znacznie uÅ‚atwia
        ich rozwiÄ…zywanie.
    </p>

    <p>
        Wiele osÃ³b sÅ‚yszÄ…c "modularyzacja" myÅ›li "mikroserwisy", dlatego zanim przejdziemy dalej, ustalmy jednÄ… kwestiÄ™.
        Mikroserwisy to tylko jeden ze sposobÃ³w na implementacjÄ™ modularyzacji, tak samo jak modularny monolit.
    </p>

    <a href="#current-state"><h2 id="current-state">Stan Aktualny</h2></a>

    <p>
        WyobraÅºmy sobie system skÅ‚adajÄ…cy siÄ™ z trzech moduÅ‚Ã³w.
    </p>
    <div class="notice">
        <p>
            <strong>Uwaga:</strong> PoniÅ¼szy diagram jest bardzo uproszczonym modelem, ktÃ³rego celem jest
            tylko przedstawienie problemu.
        </p>
    </div>
    <ul>
        <li>ModuÅ‚ <code>IAM</code> (Identity and Access) - uÅ¼ytkownicy / grupy / uprawnienia</li>
        <li>ModuÅ‚ <code>A</code> - zarzÄ…dzanie zasobami</li>
        <li>ModuÅ‚ <code>B</code> - zarzÄ…dzanie innymi zasobami</li>
    </ul>

    <div class="img-wide">
        <a href="https://norbert.tech/assets/images/blog/dark-sides-of-modularization/problem-2933ef78ce8a272ce5278e05d2779739.png" target="_blank">
            <img src="https://norbert.tech/assets/images/blog/dark-sides-of-modularization/problem-2933ef78ce8a272ce5278e05d2779739.png" alt="Mroczne Strony Modularyzacji - problem" />
        </a>
    </div>

    <p>
        System uprawnieÅ„ jest tutaj nieco skomplikowany, w gÅ‚Ã³wnej mierze opiera siÄ™ o <code>ACL</code> (Access Control List),
        czyli nadawanie uprawnieÅ„ do zasobÃ³w bezpoÅ›rednio uÅ¼ytkownikom lub grupom.
    </p>
    <p>
        Do tego wystÄ™pujÄ… teÅ¼ elementy <code>RBAC</code> (Role Based Access Control), gdzie uÅ¼ytkownicy o konkretnych
        rolach majÄ… zdefiniowane uprawnienia do konkretnych czÄ™Å›ci systemu.
    </p>
    <p>
        Mamy teÅ¼ czÄ™Å›ciowo <code>ABAC</code> (Attribute Based Access Control), gdzie uprawnienia wynikajÄ… z atrybutÃ³w uÅ¼ytkownika,
        w tym wypadku przynaleÅ¼noÅ›ci do grupy.
    </p>
    <p>
        Brzmi znajomo? To wcale nie jest aÅ¼ tak unikalny przypadek jak mogÅ‚oby siÄ™ wydawaÄ‡. No ale do sedna.
    </p>
    <a href="#problem"><h2 id="problem">Problem</h2></a>
    <p>
        System uprawnieÅ„, jak widaÄ‡ na diagramie, zdefiniowany jest w module <code>IAM</code>, czyli to tam przechowujemy
        informacjÄ™ na temat:
    </p>
    <ul>
        <li>UÅ¼ytkownikÃ³w oraz ich rÃ³l</li>
        <li>Grup, do ktÃ³rych naleÅ¼Ä… uÅ¼ytkownicy</li>
        <li>UprawnieÅ„ do konkretnych zasobÃ³w</li>
    </ul>
    <p>
        ModuÅ‚y A i B natomiast sÄ… odpowiedzialne za zarzÄ…dzanie swoimi zasobami, muszÄ… jednak upewniÄ‡ siÄ™, Å¼e
        dany uÅ¼ytkownik ma dostÄ™p do konkretnego zasobu.
    </p>
    <p>
        Schemat zaleÅ¼noÅ›ci moduÅ‚Ã³w jest wiÄ™c nastÄ™pujÄ…cy: ModuÅ‚y A i B wiedzÄ… o istnieniu moduÅ‚u IAM (sÄ… od niego
        zaleÅ¼ne), sam moduÅ‚ IAM natomiast nie ma pojÄ™cia o istnieniu moduÅ‚Ã³w A i B.
    </p>
    <div class="img-wide">
        <a href="https://norbert.tech/assets/images/blog/dark-sides-of-modularization/dependencies-e3b2cbdaf7b55733aa258cc8fd2665e7.png" target="_blank">
            <img src="https://norbert.tech/assets/images/blog/dark-sides-of-modularization/dependencies-e3b2cbdaf7b55733aa258cc8fd2665e7.png" alt="Mroczne Strony Modularyzacji - ZaleÅ¼noÅ›ci" />
        </a>
    </div>
    <p>
        Problem, na jaki trafiÅ‚ zespÃ³Å‚, to "w jaki sposÃ³b utworzyÄ‡ stronicowanÄ… listÄ™ zasobÃ³w w danym module na podstawie uprawnieÅ„ uÅ¼ytkownika".
    </p>
    <p>
        Lista zasobÃ³w dodatkowo ma pozwalaÄ‡ na:
    </p>
    <ul>
        <li>Filtrowanie na podstawie cech zasobu</li>
        <li>Sortowanie na podstawie cech zasobu</li>
        <li>PozwalaÄ‡ zwracaÄ‡ tylko wybranÄ… stronÄ™</li>
    </ul>
    <p>
        PowyÅ¼sze wymagania znacznie utrudniajÄ… implementacjÄ™, gdyby nie filtrowanie/stronicowanie, moglibyÅ›my uderzyÄ‡
        bezpoÅ›rednio do moduÅ‚u <code>IAM</code> z Å¼Ä…daniem zwrÃ³cenia zasobÃ³w dla danego uÅ¼ytkownika.
    </p>
    <div class="important">
        <p>
            Cechy zasobÃ³w to wszystkie ich parametry i atrybuty, ktÃ³re majÄ… sens i znaczenie gÅ‚Ã³wnie w obrÄ™bie swojego
            kontekstu. PrzykÅ‚adowymi cechami zasobu mogÄ… byÄ‡ jego nazwa czy data utworzenia. SÄ… to parametry, po ktÃ³rych
            uÅ¼ytkownik ma mieÄ‡ moÅ¼liwoÅ›Ä‡ sortowania lub filtrowania a ktÃ³re nie wystÄ™pujÄ… w module <code>IAM</code>
        </p>
    </div>
    <p>
        Jednak bez cech zasobÃ³w, po ktÃ³rych moÅ¼emy filtrowaÄ‡/sortowaÄ‡, moduÅ‚ <code>IAM</code> moÅ¼e co najwyÅ¼ej zwrÃ³ciÄ‡ nam wszystkie zasoby,
        a filtrowanie musielibyÅ›my zrobiÄ‡ po stronie moduÅ‚u. Nie jest to jednak zbyt skalowalne rozwiÄ…zanie.
    </p>
    <p>
        Nie wiedzÄ…c, jak wybrnÄ…Ä‡ z tej sytuacji, zespÃ³Å‚ postanowiÅ‚ (Å›wiadomie lub nie) zÅ‚amaÄ‡ zasady modularyzacji i powiÄ…zaÄ‡
        ze sobÄ… moduÅ‚y na poziomie bazy danych.
    </p>
    <p>
        PoniewaÅ¼ system wdroÅ¼ony jest jako modularny monolit, a kaÅ¼dy moduÅ‚ ma dostÄ™p do tej samej bazy danych (kaÅ¼dy moduÅ‚ posiada swoje tabele z odpowiednim prefixem),
        teoretycznie nic nie stoi na przeszkodzie, aby budujÄ…c zapytanie SQL zwracajÄ…ce listÄ™ zasobÃ³w dla konkretnego moduÅ‚u,
        podÅ‚Ä…czyÄ‡ do niego tabele uprawnieÅ„ z moduÅ‚u <code>IAM</code> i odfiltrowaÄ‡ te zasoby, do ktÃ³rych uÅ¼ytkownik nie ma dostÄ™pu.
    </p>
    <p>
        Szybkie, proste i nawet dziaÅ‚a.
    </p>
    <p>
        Prawdopodobnie mogÅ‚oby to tak sobie egzystowaÄ‡, gdyby nie jedno nowe wymaganie: musimy wydzieliÄ‡ jeden z moduÅ‚Ã³w z
        monolitu...
    </p>
    <p>
        I tutaj zaczynajÄ… siÄ™ schody. Jak wydzieliÄ‡ moduÅ‚ A jako niezaleÅ¼ny serwis, kiedy jest on mocno sprzÄ™Å¼ony na poziomie
        bazy danych z moduÅ‚em IAM? JeÅ¼eli usuniemy <code>join</code> do tabel <code>IAM</code>, kontrola dostÄ™pu przestanie
        dziaÅ‚aÄ‡.
    </p>
    <p>
        PoniÅ¼ej przedstawiÄ™ techniki, ktÃ³re pozwolÄ… nam wydzieliÄ‡ ten moduÅ‚ z monolitu bez utraty funkcjonalnoÅ›ci, Å‚amania
        zasad modularyzacji czy zmian w zaleÅ¼noÅ›ciach miÄ™dzy moduÅ‚ami.
    </p>
    <div class="notice">
        <p>
            Podczas projektowania modularnego monolitu, warto sprÃ³bowaÄ‡ trochÄ™ innego podziaÅ‚u.
            Zamiast prefixowaÄ‡ tabele, w ramach jednego serwera bazodanowego moÅ¼na stworzyÄ‡ osobne bazy/schematy dla kaÅ¼dego
            moduÅ‚u, co znaczÄ…co utrudni tworzenie przypadkowego sprzÄ™Å¼enia na poziomie zapytaÅ„ SQL.
        </p>
    </div>
    <a href="#division-of-responsibility"><h2 id="division-of-responsibility">PodziaÅ‚ odpowiedzialnoÅ›ci</h2></a>
    <p>
        A co gdyby to nie moduÅ‚ <code>IAM</code> odpowiadaÅ‚ za uprawnienia nadawane do zasobÃ³w, ktÃ³re
        Å¼yjÄ… tylko w konkretnym module?
    </p>
    <p>
        Jednym z moÅ¼liwych (dla wielu pewnie najlepszym) rozwiÄ…zaÅ„ jest separacja odpowiedzialnoÅ›ci, tzn. <code>IAM</code>
        odpowiada za autoryzacjÄ™, uÅ¼ytkownikÃ³w, ich rolÄ™ oraz grupy, do ktÃ³rych sÄ… przypisani.
    </p>
    <p>
        ModuÅ‚y natomiast same zarzÄ…dzajÄ… reguÅ‚ami uprawnieÅ„ do zasobÃ³w. Oznacza to w praktyce przeniesienie tabel <code>access_rules</code>
        do <code>Module A</code> oraz <code>Module B</code>.
    </p>
    <p>
        W rezultacie otrzymalibyÅ›my architekturÄ™ podobnÄ… do tej poniÅ¼ej:
    </p>
    <div class="img-wide">
        <a href="https://norbert.tech/assets/images/blog/dark-sides-of-modularization/separation-0a5d845d328a2a164afabebd94ee165c.png" target="_blank">
            <img src="https://norbert.tech/assets/images/blog/dark-sides-of-modularization/separation-0a5d845d328a2a164afabebd94ee165c.png" alt="Mroczne Strony Modularyzacji - Separacja" />
        </a>
    </div>
    <p>
        Å»aden z moduÅ‚Ã³w nie musi wiÄ™c robiÄ‡ wycieczek do <code>IAM</code> w celu uzyskania listy zasobÃ³w dostÄ™pnych
        dla wybranego uÅ¼ytkownika.
    </p>
    <p>
        Mamy wprawdzie lekkÄ… duplikacjÄ™ â€“ musimy dla kaÅ¼dego z istniejÄ…cych moduÅ‚Ã³w w zasadzie powtÃ³rzyÄ‡ logikÄ™
        uprawnieÅ„ oraz wpiÄ…Ä‡ jÄ… w istniejÄ…ce mechanizmy moduÅ‚Ã³w.
    </p>
    <div class="notice">
        <p>
            <strong>Uwaga:</strong> Tutaj moÅ¼e pojawiÄ‡ siÄ™ pokusa stworzenia komponentu.
            O ile nie mamy w zespoÅ‚ach ludzi doÅ›wiadczonych w budowaniu bibliotek / komponentÃ³w, najlepiej zaczÄ…Ä‡
            od duplikacji. Duplikacja w dÅ‚uÅ¼szej perspektywie czasu boli o wiele mniej niÅ¼ niepoprawna abstrakcja.
        </p>
    </div>
    <p>
        Tylko czy to wystarczy?
    </p>
    <p>
        Nie do koÅ„ca, jeÅ¼eli przyglÄ…dniemy siÄ™ tabeli uprawnieÅ„, zauwaÅ¼ymy, Å¼e uprawnienia mogÄ… byÄ‡ nadawane bezpoÅ›rednio
        uÅ¼ytkownikowi lub grupie, do ktÃ³rej dany uÅ¼ytkownik przynaleÅ¼y.
    </p>
    <p>
        Oznacza to, Å¼e w <code>Module A</code> nadajemy uprawnienia do zasobu dla grupy <code>Group 01</code>, do ktÃ³rej
        naleÅ¼y <code>User 01</code> oraz <code>User 02</code>.<br/>
        DziÄ™ki temu obydwaj uÅ¼ytkownicy majÄ… dostÄ™p do zasobu.
    </p>
    <p>
        Co natomiast jeÅ¼eli usuniemy uÅ¼ytkownika z wybranej grupy?
    </p>
    <p>
        MoÅ¼emy do tego podejÅ›Ä‡ na dwa sposoby:
    </p>
    <ol>
        <li>Podczas kaÅ¼dej weryfikacji dostÄ™pu odpytujemy moduÅ‚ <code>IAM</code> o listÄ™ grup uÅ¼ytkownika</li>
        <li>Godzimy siÄ™ na <code>eventual consistency</code> i grupy uÅ¼ytkownika trzymamy w sesji, ktÃ³rÄ… odÅ›wieÅ¼amy co kilka/kilkanaÅ›cie minut</li>
    </ol>

    <p>
        Pierwsze rozwiÄ…zanie jest najprostsze w implementacji, nie narusza granic odpowiedzialnoÅ›ci moduÅ‚Ã³w, moÅ¼e jednak
        doÅ›Ä‡ szybko staÄ‡ siÄ™ wÄ…skim gardÅ‚em.
    </p>
    <p>
        OczywiÅ›cie nie stanie siÄ™ to od razu, dodatkowo ze wzglÄ™du na charakter danych (czÄ™stszy odczyt niÅ¼ zapis) moÅ¼emy
        teÅ¼ odciÄ…Å¼yÄ‡ bazÄ™ danych poprzez wprowadzenie odpowiednich mechanizmÃ³w cachujÄ…cych.
    </p>
    <p>
        W przypadku rozwiÄ…zania numer dwa musimy upewniÄ‡ siÄ™, Å¼e jest to w ogÃ³le akceptowalne rozwiÄ…zanie z punktu widzenia
        biznesu.
    </p>
    <a href="#projection"><h2 id="projection">Projekcja</h2></a>
    <p>
        Innym podejÅ›ciem do rozwiÄ…zania problemu jest zachowanie struktury uprawnieÅ„ w module <code>IAM</code>, ale
        wprowadzenie mechanizmÃ³w pozwalajÄ…cych moduÅ‚om <code>Module A</code> oraz <code>Module B</code> na synchronizacjÄ™
        tabeli uprawnieÅ„ do lokalnej projekcji.
    </p>
    <p>
        Projekcja ta to nic innego jak uproszczona forma tabeli <code>access_rules</code> powielona w konkretnym module.
    </p>
    <p>
        W rezultacie dalej otrzymujemy pewnÄ… duplikacjÄ™, ale moduÅ‚y <code>Module A</code> oraz <code>Module B</code>
        nie skupiajÄ… siÄ™ na zarzÄ…dzaniu uprawnieniami â€“ ta odpowiedzialnoÅ›Ä‡ nadal jest oddelegowana do moduÅ‚u <code>IAM</code>.
    </p>
    <p>
        Ich odpowiedzialnoÅ›Ä‡ zredukowana zostaÅ‚a do synchronizacji uprawnieÅ„ z moduÅ‚em uprawnieÅ„.
    </p>
    <p>
        Tylko, jak i kiedy przeprowadzaÄ‡ tÄ™ synchronizacjÄ™? Za kaÅ¼dym razem, kiedy nadajemy uprawnienia do zasobu.
    </p>
    <p>
        <code>Module A</code> podczas nadawania uprawnieÅ„ uÅ¼ytkownikowi lub grupie, do jakiegoÅ› zasobu, najpierw
        komunikuje siÄ™ z moduÅ‚em <code>IAM</code>.
    </p>
    <p>
        To samo robimy podczas usuwania dostÄ™pu do zasobu. Najpierw usuwamy wpis w module <code>IAM</code> a nastÄ™pnie
        usuwamy wpis w lokalnej projekcji.
    </p>
    <p>
        Co natomiast jeÅ¼eli usuniemy uÅ¼ytkownika z wybranej grupy?
    </p>
    <p>
        Wracamy tutaj w zasadzie do tego samego problemu, ktÃ³ry mieliÅ›my w poprzednim podejÅ›ciu. MoÅ¼emy albo
        kaÅ¼dorazowo pobieraÄ‡ listÄ™ grup uÅ¼ytkownika z moduÅ‚u <code>IAM</code>, lub pogodziÄ‡ siÄ™ z <code>eventual consistency</code>.
    </p>
    <p>
        RÃ³Å¼nica pomiÄ™dzy separacjÄ… a projekcjÄ… jest bardzo niewielka. Z projekcjami moÅ¼emy jednak pÃ³jÅ›Ä‡ krok dalej.
    </p>
    <a href="#events"><h2 id="events">Zdarzenia</h2></a>
    <p>
        ModuÅ‚ <code>IAM</code> moÅ¼e rÃ³wnieÅ¼ propagowaÄ‡ zdarzenia dotyczÄ…ce:
    </p>
    <ul>
        <li>Dodania uÅ¼ytkownika do grup</li>
        <li>UsuniÄ™cia uÅ¼ytkownika z grupy</li>
        <li>UsuniÄ™cia grupy</li>
    </ul>
    <p>
        Aby zachowaÄ‡ odpowiedniÄ… strukturÄ™ zaleÅ¼noÅ›ci, zdarzenia te nie mogÄ… byÄ‡ publikowane "pod konkretnego odbiorcÄ™".
        Musimy tutaj zastosowaÄ‡ podejÅ›cie Pub/Sub, polegajÄ…ce na tym, Å¼e <code>IAM</code> wystawia zdarzenia na konkretny
        <code>Topic</code>, do ktÃ³rego zainteresowane moduÅ‚y mogÄ… siÄ™ zasubskrybowaÄ‡.
    </p>
    <p>
        DziÄ™ki temu obydwa moduÅ‚y dostanÄ… kopiÄ™ tego samego zdarzenia, ktÃ³re bÄ™dÄ… mogÅ‚y obsÅ‚uÅ¼yÄ‡ niezaleÅ¼nie.
    </p>
    <p>
        BudujÄ…c projekcjÄ™ moÅ¼emy teÅ¼ znacznie uproÅ›ciÄ‡ jej strukturÄ™, poprzez rozbicie grup na listy uÅ¼ytkownikÃ³w.
    </p>
    <p>
        JeÅ¼eli grupa otrzymuje uprawnienie typu <code>access</code> do jakiegoÅ› zasobu, to zamiast przechowywaÄ‡
        jeden wpis w projekcji reprezentujÄ…cy grupÄ™, moÅ¼emy stworzyÄ‡ wpis dla kaÅ¼dego uÅ¼ytkownika grupy.
    </p>
    <p>
        DziÄ™ki temu podczas weryfikacji praw dostÄ™pu w ogÃ³le nie musimy pytaÄ‡ moduÅ‚ <code>IAM</code> o nic. "Wystarczy", Å¼e
        zareagujemy odpowiednio na zdarzenia propagowane przez moduÅ‚ <code>IAM</code>:
    </p>
    <ul>
        <li>Dodanie uÅ¼ytkownika do grupy</li>
        <li>UsuniÄ™cie uÅ¼ytkownika z grupy</li>
        <li>UsuniÄ™cie grupy</li>
    </ul>
    <p>
        W zasadzie tylko te zdarzenia sÄ… dla nas istotne. Dodanie grupy czy uÅ¼ytkownika nie wpÅ‚ywa w zasadzie na nic,
        dlatego moÅ¼emy Å›miaÅ‚o je ignorowaÄ‡/odfiltrowaÄ‡.
    </p>
    <a href="#events-reliability"><h2 id="events-reliability">WiarygodnoÅ›Ä‡ zdarzeÅ„</h2></a>
    <p>
        OczywiÅ›cie podejÅ›cie oparte o zdarzenia niesie ze sobÄ… pewne ryzyko. Jednym z nich jest np. zaburzona kolejnoÅ›Ä‡
        zdarzeÅ„.<br/>
        PrzykÅ‚adowo najpierw dostajemy zdarzenie "usuniÄ™cia uÅ¼ytkownika z grupy", a dopiero pÃ³Åºniej "dodania", kiedy
        w rzeczywistoÅ›ci zdarzenia te nastÄ…piÅ‚y w odwrotnej kolejnoÅ›ci.
    </p>
    <p>
        Tak, to moÅ¼e byÄ‡ pewnym problemem, szczegÃ³lnie kiedy w treÅ›ci wiadomoÅ›ci zawierajÄ…cej zdarzenie znajdujÄ… siÄ™ teÅ¼
        wszystkie szczegÃ³Å‚y danego zdarzenia.
    </p>
    <p>
        MoÅ¼emy jednak temu zaradziÄ‡, decydujÄ…c siÄ™ na wykorzystanie zdarzeÅ„ anemicznych, czyli takich, ktÃ³re w zasadzie
        zawierajÄ… jedynie identyfikatory zasobÃ³w, ktÃ³rych dotyczÄ…, a po caÅ‚Ä… resztÄ™ trzeba juÅ¼ udaÄ‡ siÄ™ do moduÅ‚u ÅºrÃ³dÅ‚owego.
    </p>
    <p>
        PorÃ³wnajmy oba podejÅ›cia na przykÅ‚adzie zdarzenia <code>UserRemovedFromGroup</code>:
    </p>

    <p><strong>Zdarzenie bogate (Rich Event)</strong></p>
    <pre><code class="language-json" data-controller="syntax-highlight">{
  &quot;eventId&quot;: &quot;550e8400-e29b-41d4-a716-446655440000&quot;,
  &quot;eventType&quot;: &quot;UserRemovedFromGroup&quot;,
  &quot;occurredAt&quot;: &quot;2025-10-18T10:30:00Z&quot;,
  &quot;payload&quot;: {
    &quot;userId&quot;: 123,
    &quot;userName&quot;: &quot;jan.kowalski&quot;,
    &quot;userEmail&quot;: &quot;jan.kowalski@example.com&quot;,
    &quot;groupId&quot;: 456,
    &quot;groupName&quot;: &quot;Administrators&quot;,
    &quot;groupPermissions&quot;: [&quot;read&quot;, &quot;write&quot;, &quot;delete&quot;],
    &quot;removedBy&quot;: {
      &quot;userId&quot;: 789,
      &quot;userName&quot;: &quot;admin&quot;
    }
  }
}
</code></pre>

    <p><strong>Zdarzenie anemiczne (Anemic Event)</strong></p>
    <pre><code class="language-json" data-controller="syntax-highlight">{
  &quot;eventId&quot;: &quot;550e8400-e29b-41d4-a716-446655440000&quot;,
  &quot;eventType&quot;: &quot;UserRemovedFromGroup&quot;,
  &quot;occurredAt&quot;: &quot;2025-10-18T10:30:00Z&quot;,
  &quot;payload&quot;: {
    &quot;userId&quot;: 123,
    &quot;groupId&quot;: 456
  }
}
</code></pre>

    <p>
        RÃ³Å¼nica jest zasadnicza. W przypadku zdarzenia bogatego caÅ‚a informacja o uÅ¼ytkowniku, grupie i uprawnieniach
        jest zawarta w zdarzeniu. JeÅ¼eli kolejnoÅ›Ä‡ zdarzeÅ„ zostanie zaburzona, nasza projekcja moÅ¼e siÄ™ znaleÅºÄ‡ w niespÃ³jnym stanie.
    </p>
    <p>
        Zdarzenie anemiczne natomiast zawiera tylko identyfikatory. Konsument po otrzymaniu takiego zdarzenia musi
        wykonaÄ‡ dodatkowe zapytanie do moduÅ‚u <code>IAM</code>, aby pobraÄ‡ aktualny stan. DziÄ™ki temu niezaleÅ¼nie od kolejnoÅ›ci
        otrzymania zdarzeÅ„ zawsze otrzymamy najbardziej aktualnÄ… wersjÄ™ danych.
    </p>

    <p><strong>Scenariusz problematyczny dla Rich Events</strong></p>
    <p>
        WyobraÅºmy sobie nastÄ™pujÄ…cÄ… sekwencjÄ™ zdarzeÅ„ w module <code>IAM</code>:
    </p>
    <ol>
        <li><code>10:00:00</code> - UÅ¼ytkownik dodany do grupy "Administrators"</li>
        <li><code>10:00:05</code> - UÅ¼ytkownik usuniÄ™ty z grupy "Administrators"</li>
    </ol>
    <p>
        Konsument w Module A otrzymuje zdarzenia w odwrotnej kolejnoÅ›ci:
    </p>
    <ol>
        <li>Otrzymuje <code>UserRemovedFromGroup</code> (z danymi z 10:00:05)</li>
        <li>Otrzymuje <code>UserAddedToGroup</code> (z danymi z 10:00:00)</li>
    </ol>
    <p>
        W przypadku <strong>rich events</strong>, projekcja w Module A pokazuje, Å¼e uÅ¼ytkownik <strong>naleÅ¼y</strong>
        do grupy (bo ostatnie otrzymane zdarzenie to "dodanie"), mimo Å¼e w rzeczywistoÅ›ci zostaÅ‚ juÅ¼ z niej usuniÄ™ty.
    </p>
    <p>
        W przypadku <strong>anemic events</strong>, niezaleÅ¼nie od kolejnoÅ›ci otrzymania, Module A wykona zapytanie do IAM
        i otrzyma aktualny stan - uÅ¼ytkownik <strong>nie naleÅ¼y</strong> do grupy.
    </p>

    <div class="notice">
        <p>
            Zdarzenia anemiczne redukujÄ… ryzyko niespÃ³jnoÅ›ci, ale nie eliminujÄ… go caÅ‚kowicie.
            Nadal moÅ¼liwa jest sytuacja, gdzie miÄ™dzy otrzymaniem eventu a zapytaniem do IAM
            stan siÄ™ zmieni. MoÅ¼na wiÄ™c rozwaÅ¼yÄ‡ dodanie version number lub timestamp
            do eventÃ³w i sprawdzaÄ‡ je przy aktualizacji projekcji. ChociaÅ¼ mechanizmy zabezpieczajÄ…ce
            bÄ™dÄ… w duÅ¼ej mierze wynikaÄ‡ z ruchu i czÄ™stotliwoÅ›ci zmian.
        </p>
    </div>

    <p>
        Przedstawia siÄ™ to w nastÄ™pujÄ…cy sposÃ³b:
    </p>
    <div class="img-wide">
        <a href="https://norbert.tech/assets/images/blog/dark-sides-of-modularization/events-a4cab163fdacfd0b1ae2042e81cf2e4e.png" target="_blank">
            <img src="https://norbert.tech/assets/images/blog/dark-sides-of-modularization/events-a4cab163fdacfd0b1ae2042e81cf2e4e.png" alt="Mroczne Strony Modularyzacji - Zdarzenia" />
        </a>
    </div>
    <p>
        Kiedy konsument moduÅ‚u A otrzymuje informacjÄ™, jego rolÄ… jest udaÄ‡ siÄ™ do moduÅ‚u <code>IAM</code> i zapytaÄ‡ go
        o wszystkie reguÅ‚y dla konkretnej grupy. ModuÅ‚ <code>IAM</code> moÅ¼e zwrÃ³ciÄ‡ nam rekordy z tabeli uprawnieÅ„ dotyczÄ…cych
        konkretnej grupy, a nastÄ™pnie, jeÅ¼eli jakiekolwiek reguÅ‚y wystÄ™pujÄ…, moÅ¼emy zapytaÄ‡ o uÅ¼ytkownikÃ³w tej grupy i w
        lokalnej projekcji moduÅ‚u zbudowaÄ‡ dla nich projekcjÄ™ uprawnieÅ„.
    </p>
    <p>
        MoÅ¼emy teÅ¼ delikatnie uÅ‚atwiÄ‡ sobie Å¼ycie i do protokoÅ‚u komunikacji z moduÅ‚em <code>IAM</code> doÅ‚oÅ¼yÄ‡ moÅ¼liwoÅ›Ä‡
        pobierania pÅ‚askiej struktury uprawnieÅ„, ktÃ³ra zwrÃ³ci nam nie grupÄ™, a listÄ™ uÅ¼ytkownikÃ³w grupy z uprawnieniami do
        konkretnego zasobu.
    </p>
    <div class="important">
        <p>
            <strong>Uwaga:</strong> W celu zapewnienia dodatkowej gwarancji dostarczenia zdarzeÅ„, warto rozwaÅ¼yÄ‡
            implementacjÄ™ wzorca <strong>Outbox</strong>.
        </p>
    </div>
    <p>
        Chwila, ale czy znowu moduÅ‚ <code>IAM</code> nie stanie siÄ™ wÄ…skim gardÅ‚em?
    </p>
    <p>
        Nie do koÅ„ca, istotna jest tutaj nie tylko samo zapytanie, ale raczej jego czÄ™stotliwoÅ›Ä‡. Kontrola uprawnieÅ„ to
        jeden z tych procesÃ³w, gdzie znacznie czÄ™Å›ciej pytamy o uprawnienia, niÅ¼ je zmieniamy.
    </p>
    <p>
        OczywiÅ›cie nie naleÅ¼y wierzyÄ‡ mi na sÅ‚owo, posiadajÄ…c istniejÄ…cy system z kontrolÄ… uprawnieÅ„, warto to po prostu zmierzyÄ‡.
    </p>
    <p>
        WracajÄ…c jednak do sedna, w przypadku wykorzystania zdarzeÅ„ anemicznych nie musimy aÅ¼ tak bardzo przejmowaÄ‡ siÄ™
        kolejnoÅ›ciÄ… ich otrzymywania. Nie opieramy siÄ™ bowiem na treÅ›ci zdarzenia, a jedynie na identyfikatorze zasobu, ktÃ³rego
        dotyczy, co znacznie uÅ‚atwia budowanie projekcji.
    </p>
    <p>
        Ma to jednak swÃ³j koszt, koszt polegajÄ…cy na tym, Å¼e teraz po kaÅ¼dym zdarzeniu musimy udaÄ‡ siÄ™ do ÅºrÃ³dÅ‚a w celu
        ustalenia stanu faktycznego.
    </p>
    <p>
        Warto wiÄ™c przeanalizowaÄ‡ to podejÅ›cie pod kÄ…tem wydajnoÅ›ci.<br/>
        Technik radzenia sobie ze zdarzeniami jest jednak wiÄ™cej, jednÄ… z nich znajdziecie na <a href="https://event-driven.io/en/dealing_with_race_conditions_in_eda_using_read_models/" target="_blank">https://event-driven.io/</a>.
    </p>
    <a href="#duplication"><h2 id="duplication">Duplikacja</h2></a>
    <p>
        W obydwu podejÅ›ciach pojawia siÄ™ jednak problem duplikacji. ChociaÅ¼ w tym wypadku "problem" to chyba zÅ‚e sÅ‚owo.
        Jest to po prostu koszt modularyzacji, o ktÃ³rym siÄ™ po prostu nie mÃ³wi.
    </p>
    <p>
        NiezaleÅ¼nie czy zdecydujemy siÄ™ na separacjÄ™ odpowiedzialnoÅ›ci, czy budowanie projekcji, moduÅ‚y A oraz B bÄ™dÄ…
        mniej lub bardziej powielaÄ‡ logikÄ™ zwiÄ…zanÄ… z uprawnieniami.
    </p>
    <p>
        Dlatego niezaleÅ¼nie od naszego modelu wdroÅ¼eniowego (monolit / mikroserwisy) oraz niezaleÅ¼nie od tego, jak wydzielimy
        granice moduÅ‚Ã³w oraz ich odpowiedzialnoÅ›ci, musimy po prostu przygotowaÄ‡ siÄ™ na ten koszt.
    </p>
    <p>
        Moja rada jest tutaj zawsze taka, aby zaczÄ…Ä‡ od duplikacji. Nawet jeÅ¼eli nasze implementacje nie rÃ³Å¼niÄ… siÄ™ absolutnie
        niczym pomiÄ™dzy moduÅ‚ami.
    </p>
    <p>
        O wiele Å‚atwiej jest wyciÄ…gaÄ‡ czÄ™Å›ci wspÃ³lne z istniejÄ…cych rozwiÄ…zaÅ„, niÅ¼ projektowaÄ‡ czÄ™Å›ci wspÃ³lne dla rozwiÄ…zaÅ„
        jeszcze nieistniejÄ…cych.
    </p>
    <a href="#whats-better"><h2 id="whats-better">Co bÄ™dzie lepsze?</h2></a>
    <p>
        Na to pytanie nie ma jednoznacznej odpowiedzi. MoÅ¼emy jednak sprÃ³bowaÄ‡ przeanalizowaÄ‡ naszÄ… sytuacjÄ™ i wybraÄ‡
        takie rozwiÄ…zanie, ktÃ³re pozwoli nam wydzieliÄ‡ jeden z moduÅ‚Ã³w oraz pozbyÄ‡ siÄ™ sprzÄ™Å¼enia na poziomie bazy danych.
    </p>
    <p>
        Dla moduÅ‚u, ktÃ³ry ma zostaÄ‡ wydzielony, sugerowaÅ‚bym (o ile jest to moÅ¼liwe) separacjÄ™ odpowiedzialnoÅ›ci oraz
        przeniesienie zarzÄ…dzania uprawnieniami do zasobÃ³w do tego moduÅ‚u.
    </p>
    <p>
        Skoro i tak musimy wykonaÄ‡ pewnÄ… pracÄ™, skoro i tak musimy ten moduÅ‚ odseparowaÄ‡ fizycznie od naszego monolitu,
        moÅ¼emy teÅ¼ pÃ³jÅ›Ä‡ krok dalej i stosunkowo niewielkim kosztem zredukowaÄ‡ jeszcze bardziej jego zaleÅ¼noÅ›Ä‡ od
        <code>IAM</code>.
    </p>
    <p>
        Czy jednak taka operacja ma sens dla istniejÄ…cych moduÅ‚Ã³w?
    </p>
    <p>
        Dla moduÅ‚Ã³w, ktÃ³re nie muszÄ… byÄ‡ wydzielane i dalej bÄ™dÄ… Å¼yÅ‚y w ramach modularnego monolitu, sugerowaÅ‚bym
        podejÅ›cie oparte o projekcjÄ™, jednak niekoniecznie o zdarzenia.
    </p>
    <a href="#projections-without-events"><h2 id="projections-without-events">Projekcje bez zdarzeÅ„</h2></a>
    <div class="important">
        <p>
            Jest to technika, ktÃ³ra nie sprawdzi siÄ™ w podejÅ›ciu mikroserwisowym, ale moÅ¼e pomÃ³c doraÅºnie.
            Nie tylko pomÃ³c, ale teÅ¼ nakreÅ›liÄ‡ kierunek na przyszÅ‚oÅ›Ä‡. MoÅ¼na jÄ… zaimplementowaÄ‡ niskim kosztem, otrzymujÄ…c
            w zasadzie to samo co przy podejÅ›ciu opartym o zdarzenia.
        </p>
    </div>
    <p>
        Popatrzmy na to z innej perspektywy. Pub/Sub to w zasadzie mechanizm pozwalajÄ…cy nam na pewnÄ… formÄ™ replikacji.
        DziÄ™ki zdarzeniom, posiadamy wiedzÄ™, Å¼e coÅ› miaÅ‚o miejsce w jakimÅ› momencie w jakimÅ› module.
    </p>
    <p>
        A co gdyby zamiast publikowaÄ‡ zdarzenie na <code>Topic</code> wykorzystaÄ‡ <code>Materialized Views</code>?
    </p>
    <p>
        Tak, wielu osobom zapewne w tym momencie zapala siÄ™ czerwona lampka. No bo jak to tak, materialized view?
        Logika po stronie bazy danych zamiast w kodzie?
    </p>
    <p>
        CÃ³Å¼, nie jest to rozwiÄ…zanie idealne. Wprawdzie pozbywamy siÄ™ sprzÄ™Å¼enia na poziomie SQL, ale w zamian
        otrzymujemy inne sprzÄ™Å¼enie, tym razem na poziomie bazy danych.
    </p>
    <p>
        JeÅ¼eli jednak podejdziemy do tego pragmatycznie, to finalnie wymieniamy po prostu mechanizm transportu.
        Zamiast budowaÄ‡ pub/sub, implementowaÄ‡ Outbox pattern, obsÅ‚ugiwaÄ‡ bÅ‚Ä™dy komunikacji sieciowej, retry itp.
        moÅ¼emy po prostu pozwoliÄ‡ bazie danych na replikacjÄ™ danych.
    </p>
    <p>
        JeÅ¼eli z jakiegokolwiek powodu przestanie nam siÄ™ to sprawdzaÄ‡, np. kiedy odÅ›wieÅ¼anie zmaterializowanego widoku
        bÄ™dzie zbyt kosztowne i niepotrzebnie zacznie obciÄ…Å¼aÄ‡ naszÄ… bazÄ™ danych, nic nie bÄ™dzie staÅ‚o na przeszkodzie,
        aby przerzuciÄ‡ siÄ™ na projekcje.
    </p>
    <p>
        Zanim jednak do tego dojdziemy, moÅ¼emy teÅ¼ sprÃ³bowaÄ‡ sam proces odÅ›wieÅ¼ania wrzuciÄ‡ na kolejkÄ™ w module <code>IAM</code>
        i realizowaÄ‡ go asynchronicznie. Dostaniemy lekkie opÃ³Åºnienie, chociaÅ¼ w tym wypadku powinno byÄ‡ ono na akceptowalnym poziomie.
    </p>
    <p>
        Kluczowe jest zrozumienie, Å¼e <code>Materialized View</code> nie jest rozwiÄ…zaniem ani zÅ‚ym, ani dobrym â€“ daje nam jednak
        moÅ¼liwoÅ›Ä‡ stosunkowo szybkiego wprowadzenia uproszczonej separacji bez koniecznoÅ›ci budowania caÅ‚ego mechanizmu opartego o zdarzenia.
    </p>
    <p>
        Kiedy jednak peÅ‚na separacja/wydajnoÅ›Ä‡/vendor locking lub cokolwiek innego zacznie nam tutaj doskwieraÄ‡, nie powinno byÄ‡ wiÄ™kszych
        problemÃ³w z przejÅ›ciem na projekcje.
    </p>
    <p>
        WÅ‚aÅ›nie to czyni <code>Materialized View</code> interesujÄ…cym rozwiÄ…zaniem.
    </p>
    <a href="#ideal-solution"><h2 id="ideal-solution">RozwiÄ…zanie idealne</h2></a>
    <p class="text-center">
        <strong>Nie istnieje...</strong>
    </p>
    <p>
        I to chyba najwaÅ¼niejsze co chciaÅ‚bym przekazaÄ‡ w tym artykule.
    </p>
    <p>
        Nawet jeÅ¼eli uda siÄ™ nam zredukowaÄ‡ problem tylko i wyÅ‚Ä…cznie do technologii i nawet jeÅ¼eli jakimÅ› cudem
        wszyscy zgodzilibyÅ›my siÄ™, Å¼e problem A naleÅ¼y rozwiÄ…zaÄ‡ wzorcem/technikÄ…/architekturÄ… B. <br/>
    </p>
    <p>
        Nic z tego moÅ¼e nie mieÄ‡ znaczenia, biznes najzwyczajniej w Å›wiecie moÅ¼e nie wyraziÄ‡ zgody na wiÄ™kszy refactoring...<br/>
        I nie musi to byÄ‡ zÅ‚a wola lub ignorancja, czasami po prostu nie mamy zasobÃ³w. <br/>
    </p>
    <p>
        CiÄ™Å¼ko jest uzasadniÄ‡, dlaczego mielibyÅ›my poÅ›wiÄ™ciÄ‡ czas na to, aby zarzÄ…dzanie uprawnieniami przenieÅ›Ä‡ do moduÅ‚Ã³w,
        kiedy wszystko dziaÅ‚a i generuje zyski.
    </p>
    <p>
        Tak samo ciÄ™Å¼ko bÄ™dzie uargumentowaÄ‡, dlaczego nagle, majÄ…c wymaganie wydzielenia jednego moduÅ‚u, musimy poprawiÄ‡
        wszystkie pozostaÅ‚e, dodajÄ…c do nich komunikacjÄ™ asynchronicznÄ…, zdarzenia, mechanizmy retry, recovery itp.
    </p>
    <p>
        Warto pogodziÄ‡ siÄ™ z faktem, Å¼e Å›wiat nie jest idealny, nie jest czarno-biaÅ‚y i czÄ™sto bÄ™dziemy musieli
        wybieraÄ‡ pomiÄ™dzy kilkoma niedoskonaÅ‚ymi rozwiÄ…zaniami.
    </p>
    <p>
        To, co w jednym miejscu moÅ¼e wydawaÄ‡ siÄ™ absolutnie niepoprawne, w innym kontekÅ›cie moÅ¼e byÄ‡ juÅ¼ akceptowalne,
        albo wrÄ™cz poÅ¼Ä…dane.
    </p>
    <a href="#help"><h2 id="help">Pomoc</h2></a>
    <p>
        A gdybyÅ› zmagaÅ‚ siÄ™ podobnymi problemami w swoim projekcie i nie bardzo wiedziaÅ‚, jak je rozwiÄ…zaÄ‡.<br/>
        <a href="https://norbert.tech/consulting">Skontaktuj siÄ™ ze mnÄ…</a>, a wspÃ³lnie znajdziemy rozwiÄ…zanie, ktÃ³re bÄ™dzie idealnie dopasowane do Twoich potrzeb.
    </p>
    <p>
        ZachÄ™cam rÃ³wnieÅ¼ do odwiedzenia serwera <a href="https://discord.gg/5dNXfQyACW" target="_blank">Discord - Flow PHP</a>, na ktÃ³rym
        moÅ¼emy porozmawiaÄ‡ bezpoÅ›rednio.
    </p>
    <div class="img-wide">
        <img src="https://norbert.tech/assets/images/blog/analytics-in-transactional-distributed-systems/consulting_01-fa277dfb3736a033cbfcf1ac931afb08.jpg" alt="Konsultacje" />
    </div>

    </article>
    <div class="mb-2 mx-auto max-w-screen-lg text-center">
        <script src="https://giscus.app/client.js"
                data-repo="norberttech/norbert.tech"
                data-repo-id="MDEwOlJlcG9zaXRvcnkyMjQ0MDQwNDA="
                data-category="Comments"
                data-category-id="DIC_kwDODWAiSM4CionD"
                data-mapping="pathname"
                data-strict="0"
                data-reactions-enabled="0"
                data-emit-metadata="0"
                data-input-position="bottom"
                data-theme="light"
                data-lang="en"
                crossorigin="anonymous"
                async>
        </script>
    </div>
    </main>

    <footer class="p-4 bg-sky-50 absolute bottom-0 w-full">
        <div class="mx-auto max-w-screen-2xl text-center">
            <a href="/">by @norbert_tech</a>
        </div>
    </footer>
</body>
</html>